<form
  (ngSubmit)="onSubmit()"
  [formGroup]="form"
  class="mx-auto p-4 rounded-3 shadow-sm bg-white border"
  style="max-width: 600px;"
>
  <div class="d-flex flex-column gap-3">
    @for (field of config(); track field.name) {
      <div class="w-100">
        <label [for]="field.name" class="form-label fw-semibold">
          {{ field.label }}
        </label>

        @if (field.type !== 'select') {
          <input
            [id]="field.name"
            [type]="field.type"
            [formControlName]="field.name"
            [placeholder]="field.placeholder"
            class="form-control"
          />
        } @else {
          <ng-select
            [items]="field.options"
            [bindValue]="'value'"
            [bindLabel]="'label'"
            [multiple]="field.multiselect"
            [placeholder]="'Select options'"
            [clearable]="false"
            [formControlName]="field.name"
            class="form-control">
          </ng-select>
        }

        <!-- Messaggio di errore -->
        @if (form.get(field.name)?.invalid && form.get(field.name)?.touched) {
          <div class="text-danger small mt-1 d-flex align-items-center">
            <i class="bi bi-exclamation-circle-fill me-1"></i>
            {{ field.label }} Ã¨ obbligatorio.
          </div>
        }
      </div>
    }

    <div class="mt-3">
      <div class="d-flex justify-content-end gap-2">
        <button
          [disabled]="form.invalid"
          class="btn btn-primary"
          type="submit"
        >
          {{ nameSubmitButton() }}
        </button>
      </div>
    </div>
  </div>
</form>
